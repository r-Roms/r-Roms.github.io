{"version":3,"file":"journal.js","names":["Entry","JournalAnalysisInvalid","JournalAnalysisReadWrite","JournalAnalysisReadOnly","commitJournal","journal","entry","commit","analyzeJournal","val","isInvalid","isChanged","prepareResetJournal","saved","Map","set","copy","clear","collectTodos","allTodos","todo","ref","todos","execTodos","todosSorted","Array","from","entries","sort","x","y","_","addTodo","txnId","todoEffect","added","has","isValid","valid"],"sources":["../../../../src/internal/stm/journal.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]}